jQuery(document).ready(function() {
    jQuery("body").on("click", "#show-inventories", function(e) {
        jQuery('#show-inventories').hide();
        PostData();
    });
});

jQuery(document).ready(function() {
    jQuery("body").on("click", "#add-inventories", function(e) {
        jQuery('.add-new-inventory').show();
        jQuery('#add-inventories').hide();
        GetMakes();
    });
});


function PostData(){

    jQuery('#inventory-content').hide();
    jQuery('#loading-content').show();
    jQuery('#loading-content').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

    jQuery.ajax({
        type: "POST",
        url: "../wp-content/plugins/plugins-inventory/admin/inventory-front.php",
        dataType:"text",
        success: function(data) {
            jQuery('#loading-content').hide();
            jQuery('#inventory-content').show();
            jQuery('#inventory-content').html(data);

        },
        error:function (xhr, ajaxOptions, thrownError){
            //On error, alert user
            console.log(thrownError);
        }
    });

}

function GetMakes(){
    jQuery('#manufacturers').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

    jQuery.ajax({
        type: "POST",
        url: "../wp-content/plugins/plugins-inventory/admin/inventory-makes.php",
        dataType:"text",
        success: function(data) {
            jQuery('#manufacturers').html(data);
        },
        error:function (xhr, ajaxOptions, thrownError){
            //On error, alert user
            console.log(thrownError);
        }
    });
}

jQuery(document).ready(function() {
    jQuery("body").on("click", "#used", function(e) {
        jQuery('#manufacturers').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-makes.php?condition=used",
            dataType: "text",
            success: function (data) {
                jQuery('#manufacturers').html(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                //On error, alert user
                console.log(thrownError);

            }
        });
    });

    jQuery("body").on("click", "#new", function(e) {
        jQuery('#manufacturers').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-makes.php?condition=new",
            dataType:"text",
            success: function(data) {
                jQuery('#manufacturers').html(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });

    jQuery("body").on("click", "#both", function(e) {
        jQuery('#manufacturers').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-makes.php",
            dataType:"text",
            success: function(data) {
                jQuery('#manufacturers').html(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });
});

jQuery(document).ready(function() {
    jQuery("body").on("click", ".edit_used", function(e) {
        jQuery('#edit-manufacturers').hide();
        jQuery('#edit-manufacturers-change').show();
        jQuery('#edit-manufacturers-change').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        var myData = 'identity='+ DbNumberID; //build a post data structure

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-edit-makes.php?condition=used&"+myData,
            dataType: "text",
            success: function (data) {
                jQuery('#edit-manufacturers-change').html(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                //On error, alert user
                console.log(thrownError);

            }
        });
    });

    jQuery("body").on("click", ".edit_new", function(e) {
        jQuery('#edit-manufacturers').hide();
        jQuery('#edit-manufacturers-change').show();
        jQuery('#edit-manufacturers-change').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        var myData = 'identity='+ DbNumberID; //build a post data structure

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-edit-makes.php?condition=new&"+myData,
            dataType:"text",
            success: function(data) {
                jQuery('#edit-manufacturers-change').html(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });

    jQuery("body").on("click", ".edit_both", function(e) {
        jQuery('#edit-manufacturers').hide();
        jQuery('#edit-manufacturers-change').show();
        jQuery('#edit-manufacturers-change').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        var myData = 'identity='+ DbNumberID; //build a post data structure

        jQuery.ajax({
            type: "POST",
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-edit-makes.php?"+myData,
            dataType:"text",
            success: function(data) {
                jQuery('#edit-manufacturers-change').html(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });
});

jQuery(document).ready(function() {
    jQuery("body").on("click", ".del_button", function(e) {
        e.preventDefault();
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        var myData = 'recordToDelete='+ DbNumberID; //build a post data structure

        jQuery('#item_'+DbNumberID).addClass( "sel" ); //change background of this element by adding class
        jQuery('#inventory-content').hide(); //hide currently clicked delete button
        jQuery('#loading-content').show();
        jQuery('#loading-content').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');

        jQuery.ajax({
            type: "POST", // HTTP method POST or GET
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-front.php", //Where to make Ajax calls
            dataType:"text", // Data type, HTML, json etc.
            data:myData, //Form variables
            success:function(response){
                //on success, hide  element user wants to delete.
                jQuery('#item_'+DbNumberID).fadeOut();
                PostData();
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });

});

jQuery(document).ready(function() {
    jQuery("body").on("click", ".edit_button", function(e) {
        e.preventDefault();
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        var DbNumberCOND = clickedID[2]; //and get number from array
        var myData = 'identity='+ DbNumberID + '&condition='+ DbNumberCOND; //build a post data structure

        jQuery('#inventory-content').hide(); //hide currently clicked delete button
        jQuery('#loading-content').show();
        jQuery('#loading-content').html('<img src="../wp-content/plugins/plugins-inventory/images/ajax-loader.gif">');



        jQuery.ajax({
            type: "POST", // HTTP method POST or GET
            url: "../wp-content/plugins/plugins-inventory/admin/inventory-edit.php?"+myData, //Where to make Ajax calls
            dataType:"text", // Data type, HTML, json etc.
            success:function(data){
                jQuery('#loading-content').hide();
                jQuery('#edit-content').show();
                jQuery('#edit-content').html(data);
            },
            error:function (xhr, ajaxOptions, thrownError){
                //On error, alert user
                console.log(thrownError);
            }
        });

    });

});

jQuery(document).ready(function(){
	var isSettingsForm = jQuery('#inventory_plugin_settings').length;
	if(isSettingsForm == 1) {
		jQuery('#inventory_plugin_settings form').submit(function(e) {
			
			var lengthSelections = jQuery('#inventory_plugin_settings .inventory_plugin_length_checkboxes:checked');
			var defaultLength = jQuery('#inventory_plugin_settings .inventory_plugin_default_length_unit:checked');
			var currencySelections = jQuery('#inventory_plugin_settings .inventory_plugin_currency_checkboxes:checked');
			var defaultCurrency = jQuery('#inventory_plugin_settings .inventory_plugin_default_currency:checked');
			
			if(lengthSelections.length < 1 || currencySelections.length < 1) {
				e.preventDefault();
				alert('Make sure you have at least one currency and one length unit selected!');
			}
			
			if(defaultLength.length < 1) {
				var firstLengthOption = lengthSelections.first().val();
				jQuery('#inventory_plugin_settings .inventory_plugin_default_length_unit[value=' + firstLengthOption + ']').attr('checked', 'checked');
			}	
			
			if(defaultCurrency.length < 1) {
				var firstCurrencyOption = currencySelections.first().val();
				jQuery('#inventory_plugin_settings .inventory_plugin_default_currency[value=' + firstCurrencyOption + ']').attr('checked', 'checked');
			}			

		});
		
		jQuery('#inventory_plugin_settings .inventory_plugin_currency_checkboxes').change(function() {
			var labelObj = jQuery('#inventory_plugin_settings .inventory_plugin_default_currency[value=' + jQuery(this).val() + ']').parent();
			if(jQuery(this).attr('checked')) {
				labelObj.show();
			}
			else {
				labelObj.find('input').removeAttr('checked');
				labelObj.hide();
			}
		});
		
		jQuery('#inventory_plugin_settings .inventory_plugin_length_checkboxes').change(function() {
			var labelObj = jQuery('#inventory_plugin_settings .inventory_plugin_default_length_unit[value=' + jQuery(this).val() + ']').parent();
			if(jQuery(this).attr('checked')) {
				labelObj.show();
			}
			else {
				labelObj.find('input').removeAttr('checked');
				labelObj.hide();
			}
		});		
	}
});

jQuery(document).ready(function(){
    jQuery("body").on("click", "#edit-cancel-button", function(e) {
        jQuery('#edit-content').hide();
    });
    jQuery("body").on("click", "#edit-cancel-button", function(e) {
        jQuery('#inventory-content').show();
    });
});

jQuery(document).ready(function() {
    jQuery("body").on("click", "#select_all", function(e) {
        if(this.checked) { // check select status
            jQuery('.makecheck').each(function() { //loop through each checkbox
                this.checked = true;  //select all checkboxes with class "makecheck"
            });
        }else{
            jQuery('.makecheck').each(function() { //loop through each checkbox
                this.checked = false; //deselect all checkboxes with class "makecheck"
            });
        }
    });

});

jQuery(document).ready(function(){
    jQuery("body").on("click", ".more", function(e) {
        e.preventDefault();
        var clickedID = this.id.split('-'); //Split ID string (Split works as PHP explode)
        var DbNumberID = clickedID[1]; //and get number from array
        jQuery('#inv_all_manu-'+DbNumberID).show();
    });
    jQuery("body").on("click", "#close_all_manu", function(e) {
        jQuery('.inv_all_manu').hide();
    });
});